(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],{18:function(e,t){e.exports={moviesBaseUrl:"https://api.nomoreparties.co/beatfilm-movies",mainBaseUrl:"https://api.dtakush.diploma.nomoredomains.monster"}},32:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(24),r=a.n(s),i=(a(32),a(13)),o=a(21),l=a.n(o),j=a(25),d=a(2),u=a(3),h=a(4),m=a(27),b=a.p+"static/media/logo.8f97642a.svg",_=a(0);var p=function(e){return Object(_.jsx)("section",{className:"nav-popup ".concat(e.isOpen?"nav-popup_open":""),children:Object(_.jsxs)("div",{className:"nav-popup__container",children:[Object(_.jsx)("button",{className:"nav-popup__close-button",onClick:e.onClose}),Object(_.jsxs)("ul",{className:"nav-popup__links",children:[Object(_.jsx)("li",{className:"nav-popup__link",children:Object(_.jsx)(h.c,{to:"/",className:"nav-popup__nav nav-popup__link_main",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(_.jsx)("li",{className:"nav-popup__link",children:Object(_.jsx)(h.c,{to:"/movies",className:"nav-popup__nav nav-popup__link_movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(_.jsx)("li",{className:"nav-popup__link",children:Object(_.jsx)(h.c,{to:"/saved-movies",className:"nav-popup__nav nav-popup__nav_saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})})]}),Object(_.jsx)("div",{className:"nav-popup__accaunt",children:Object(_.jsxs)(h.c,{to:"/profile",className:"header__link header__profile-link",children:["\u0410\u043a\u043a\u0430\u0443\u043d\u0442",Object(_.jsx)("button",{className:"header__profile-button",type:"button"})]})})]})})};var O=function(e){var t=Object(u.g)(),a=Object(m.useMediaQuery)({query:"(max-width: 1000px)"}),n=c.a.useState(!1),s=Object(d.a)(n,2),r=s[0],i=s[1];return Object(_.jsx)("header",{className:"".concat("/"===t.pathname?"header":"header header_loggedin"),children:Object(_.jsxs)("div",{className:"header__info",children:[Object(_.jsx)(h.c,{to:"/",className:"header__logo",children:Object(_.jsx)("img",{src:b,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})}),"/"===t.pathname?Object(_.jsxs)("div",{className:"header__nav",children:[Object(_.jsx)(h.c,{to:"/signup",className:"header__link header__signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsx)(h.c,{to:"/signin",className:"header__link header__signin",children:"\u0412\u043e\u0439\u0442\u0438"})]}):Object(_.jsx)(_.Fragment,{children:a?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{className:"header__nav-button",type:"button",onClick:function(){i(!r)}}),Object(_.jsx)(p,{isOpen:r,onClose:function(){i(!1)}})]}):Object(_.jsxs)("div",{className:"header__nav header__nav_loggedin",children:[Object(_.jsxs)("div",{className:"header__links",children:[Object(_.jsx)(h.c,{to:"/movies",className:"header__link header__movies-link",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(_.jsx)(h.c,{to:"/saved-movies",className:"header__link header__saved-movies-link",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]}),Object(_.jsxs)(h.c,{to:"/profile",className:"header__link header__profile-link",children:["\u0410\u043a\u043a\u0430\u0443\u043d\u0442",Object(_.jsx)("button",{className:"header__profile-button",type:"button"})]})]})})]})})};var x=function(e){return Object(_.jsx)("section",{className:"promo",children:Object(_.jsx)("div",{className:"promo__image",children:Object(_.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})})};var v=function(e){return Object(_.jsxs)("section",{className:"nav-tab",children:[Object(_.jsx)("a",{href:"#project",className:"nav-tab__link",rel:"noreferrer",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(_.jsx)("a",{href:"#techs",className:"nav-tab__link",rel:"noreferrer",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(_.jsx)("a",{href:"#me",className:"nav-tab__link",rel:"noreferrer",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})]})};var f=function(e){return Object(_.jsx)("div",{className:"subtitle-block",children:Object(_.jsx)("h3",{className:"subtitle",children:e.subtitle})})};var N=function(e){return Object(_.jsx)("section",{id:"project",className:"about-project",children:Object(_.jsxs)("div",{className:"about-project__container",children:[Object(_.jsx)(f,{subtitle:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(_.jsxs)("div",{className:"about-project__text-container",children:[Object(_.jsxs)("article",{className:"about-project__text-block",children:[Object(_.jsx)("h4",{className:"about-project__subtitle",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(_.jsx)("p",{className:"about-project__text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(_.jsxs)("article",{className:"about-project__text-block",children:[Object(_.jsx)("h4",{className:"about-project__subtitle",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(_.jsx)("p",{className:"about-project__text",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(_.jsxs)("div",{className:"about-project__line-container",children:[Object(_.jsx)("div",{className:"about-project__line about-project__color-line",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(_.jsx)("div",{className:"about-project__line about-project__grey-line",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(_.jsx)("p",{className:"about-project__line-text",children:"Back-end"}),Object(_.jsx)("p",{className:"about-project__line-text",children:"Front-end"})]})]})})};var g=function(e){return Object(_.jsx)("section",{id:"techs",className:"techs",children:Object(_.jsxs)("div",{className:"techs__conteiner",children:[Object(_.jsx)(f,{subtitle:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(_.jsx)("h2",{className:"techs__title",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(_.jsx)("p",{className:"techs__subtitle",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(_.jsxs)("div",{className:"techs__blocks",children:[Object(_.jsx)("div",{className:"techs__block",children:"HTML"}),Object(_.jsx)("div",{className:"techs__block",children:"CSS"}),Object(_.jsx)("div",{className:"techs__block",children:"JS"}),Object(_.jsx)("div",{className:"techs__block",children:"React"}),Object(_.jsx)("div",{className:"techs__block",children:"Git"}),Object(_.jsx)("div",{className:"techs__block",children:"Express.js"}),Object(_.jsx)("div",{className:"techs__block",children:"mongoDB"})]})]})})};var k=function(e){return Object(_.jsx)("section",{id:"me",className:"about-me",children:Object(_.jsxs)("div",{className:"about-me__conteiner",children:[Object(_.jsx)(f,{subtitle:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(_.jsxs)("div",{className:"about-me__block",children:[Object(_.jsxs)("div",{className:"about-me__text-block",children:[Object(_.jsx)("h4",{className:"about-me__title",children:"\u0414\u0430\u0440\u044c\u044f"}),Object(_.jsx)("p",{className:"about-me__subtitle",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 28 \u043b\u0435\u0442"}),Object(_.jsx)("p",{className:"about-me__text",children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0414\u0430\u0448\u0430 \u0438 \u0442\u0430\u043a \u0432\u044b\u0448\u043b\u043e, \u0447\u0442\u043e \u044f \u0434\u0438\u0437\u0430\u0439\u043d\u0435\u0440. \u0411\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c \u0437\u0430 \u0441\u0435\u043c\u044c \u043b\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u044b, \u044f \u0443\u0441\u043f\u0435\u043b\u0430 \u043f\u043e\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043a\u0430\u043a \u0441 \u043c\u043e\u043d\u0441\u0442\u0440\u0430\u043c\u0438 \u0440\u044b\u043d\u043a\u0430, \u0442\u0430\u043a \u0438 \u043f\u043e\u043c\u043e\u0447\u044c \u0432 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043a\u0440\u0430\u0441\u043e\u0442\u044b \u0438 \u043f\u043e\u0440\u044f\u0434\u043a\u0430 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u043c \u0431\u0440\u0435\u043d\u0434\u0430\u043c."}),Object(_.jsxs)("div",{className:"about-me__links",children:[Object(_.jsx)("a",{className:"about-me__link",href:"https://www.facebook.com/dashatakush",target:"_blank",rel:"noreferrer",children:"Facebook"}),Object(_.jsx)("a",{className:"about-me__link",href:"https://github.com/dtakush",target:"_blank",rel:"noreferrer",children:"GitHub"}),Object(_.jsx)("a",{className:"about-me__link",href:"https://www.instagram.com/dariatakush/",target:"_blank",rel:"noreferrer",children:"Instagram"})]})]}),Object(_.jsx)("div",{className:"about-me__photo"})]}),Object(_.jsx)("h5",{className:"about-me__portfolio",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(_.jsxs)("a",{className:"about-me__web-link",href:"https://github.com/dtakush/how-to-learn.git",target:"_blank",rel:"noreferrer",children:[Object(_.jsx)("p",{className:"about-me__web-link_title",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(_.jsx)("div",{className:"about-me__web-link_arrow"})]}),Object(_.jsxs)("a",{className:"about-me__web-link",href:"https://github.com/dtakush/mesto.git",target:"_blank",rel:"noreferrer",children:[Object(_.jsx)("p",{className:"about-me__web-link_title",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(_.jsx)("div",{className:"about-me__web-link_arrow"})]}),Object(_.jsxs)("a",{className:"about-me__web-link",href:"https://github.com/dtakush/react-mesto-api-full.git",target:"_blank",rel:"noreferrer",children:[Object(_.jsx)("p",{className:"about-me__web-link_title",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(_.jsx)("div",{className:"about-me__web-link_arrow"})]})]})})};var S=function(e){return Object(_.jsx)("section",{className:"footer",children:Object(_.jsxs)("div",{className:"footer__container",children:[Object(_.jsx)("p",{className:"footer__disclaimer",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(_.jsx)("div",{className:"footer__line"}),Object(_.jsxs)("div",{className:"footer__block",children:[Object(_.jsx)("p",{className:"footer__date",children:"\xa9 2021"}),Object(_.jsxs)("ul",{className:"footer__links",children:[Object(_.jsx)("li",{className:"footer__link",children:Object(_.jsx)("a",{className:"footer__text",href:"https://practicum.yandex.ru/",target:"_blank",rel:"noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(_.jsx)("li",{className:"footer__link",children:Object(_.jsx)("a",{className:"footer__text",href:"https://github.com/yandex-praktikum",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(_.jsx)("li",{className:"footer__link",children:Object(_.jsx)("a",{className:"footer__text",href:"https://www.facebook.com/yandex.practicum",target:"_blank",rel:"noreferrer",children:"Facebook"})})]})]})]})})};var y=function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O,{}),Object(_.jsx)(x,{}),Object(_.jsx)(v,{}),Object(_.jsx)(N,{}),Object(_.jsx)(g,{}),Object(_.jsx)(k,{}),Object(_.jsx)(S,{})]})};var w=function(e){return Object(_.jsxs)("div",{className:"checkbox",children:[Object(_.jsx)("p",{className:"checkbox__text",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"}),Object(_.jsxs)("div",{className:"checkbox__container",children:[Object(_.jsx)("input",{type:"checkbox",value:"None",id:"filter",name:"check",className:"checkbox__input"}),Object(_.jsx)("label",{className:"checkbox__label"})]})]})};var C=function(e){var t=c.a.useState(""),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(_.jsx)("section",{className:"searchform",children:Object(_.jsxs)("div",{className:"searchform__container",children:[Object(_.jsxs)("form",{className:"searchform__form",onSubmit:function(t){t.preventDefault(),e.onSearch(n)},noValidate:!0,children:[Object(_.jsx)("input",{onChange:function(e){s(e.target.value)},value:n||"",id:"search",type:"text",className:"searchform__input",placeholder:"\u0424\u0438\u043b\u044c\u043c",required:!0}),Object(_.jsx)("button",{className:"searchform__button",type:"submit",children:Object(_.jsx)("div",{className:"searchform__button_pic"})})]}),Object(_.jsx)(w,{})]})})};var U=function(e){var t=Object(u.g)(),a=c.a.useState(!1),n=Object(d.a)(a,2),s=n[0],r=n[1],i=c.a.useCallback((function(){var t=e.savedMovies.find((function(t){return t.movieId===e.movie.id}));r(!!t)}),[e.movie.id,e.savedMovies]);function o(){if(s){var t=e.savedMovies.find((function(t){return t.movieId===e.movie.id}));e.onDelete(t),r(!1)}else e.onSaveClick({country:e.movie.country||"no country",director:e.movie.director,duration:e.movie.duration,year:e.movie.year,description:e.movie.description,image:e.movie.image.url,trailer:e.movie.trailerLink||"trailer",movieId:e.movie.id,nameRU:e.movie.nameRU||"no nameRU",nameEN:e.movie.nameEN||"no nameEN",thumbnail:e.movie.image.formats.thumbnail.url}),r(!0)}return c.a.useEffect((function(){i()}),[i]),Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"card__menu",children:[Object(_.jsxs)("div",{className:"card__text",children:[Object(_.jsx)("h5",{className:"card__title",children:e.nameRU}),Object(_.jsx)("p",{className:"card__duraton",children:function(e){var t=Math.trunc(e/60),a=e%60;return"".concat(t>0?"".concat(t,"\u0447 "):"").concat(a,"\u043c")}(e.duration)})]}),"/movies"===t.pathname&&!s&&Object(_.jsx)("button",{className:"card__save-button",onClick:o,children:Object(_.jsx)("div",{className:"card__save-icon"})}),"/movies"===t.pathname&&s&&Object(_.jsx)("button",{className:"card__save-button card__save-button_active",onClick:o,children:Object(_.jsx)("div",{className:"card__save-icon card__save-icon_active"})}),"/saved-movies"===t.pathname&&Object(_.jsx)("button",{className:"card__save-button",onClick:function(){e.onDelete(e.movie)},children:Object(_.jsx)("div",{className:"card__save-icon_saved"})})]}),Object(_.jsx)("a",{className:"card__trailer-link",href:e.trailerLink,target:"_blank",rel:"noreferrer",children:Object(_.jsx)("div",{className:"card__image",style:{backgroundImage:"url(https://api.nomoreparties.co".concat(e.image,")")}})})]})};var I=function(e){var t=Object(u.g)(),a=Object(n.useState)([]),s=Object(d.a)(a,2),r=s[0],o=s[1],l=Object(n.useState)(0),j=Object(d.a)(l,2),h=j[0],m=j[1],b=Object(n.useState)(3),p=Object(d.a)(b,2),O=p[0];return p[1],c.a.useEffect((function(){var t,a=window.innerWidth,n=Math.min(e.cards.length,(t=a,t>1279?{first:12,extra:3}:t<1279&&t>810?{first:8,extra:2}:t<810&&t>319?{first:5,extra:5}:void 0).first);o(e.cards.slice(0,n))}),[e.cards]),Object(_.jsxs)("section",{className:"movies-cards",children:[e.noResult?Object(_.jsx)("p",{className:"movies-cards__no-result",children:"\u041f\u043e\u0438\u0441\u043a \u043d\u0435 \u0434\u0430\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"}):"",Object(_.jsx)("div",{className:"movies-cards__container",children:r.map((function(t){return Object(_.jsx)(U,{movie:t,nameRU:t.nameRU,duration:t.duration,trailerLink:t.trailerLink,image:t.image.url,onSaveClick:e.onSaveClick,onDelete:e.onDelete,savedMovies:e.savedMovies,isSavedMovie:e.isSavedMovie},t.id)}))}),Object(_.jsx)("button",{type:"button",onClick:function(){return function(){var t=Math.min(e.cards.length,h+O),a=e.cards.slice(h,t);o([].concat(Object(i.a)(r),Object(i.a)(a))),m(t)}()},className:"".concat("/movies"===t.pathname?"movies-cards__more-button":"movies-cards__more-button_saved","\n                        ").concat(e.cards.length>r.length?"":"movies-cards__more-button_hide"),children:"\u0415\u0449\u0451"})]})},R=(a(43),function(){return Object(_.jsx)("div",{className:"preloader",children:Object(_.jsx)("div",{className:"preloader__container",children:Object(_.jsx)("span",{className:"preloader__round"})})})});var E=function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O,{}),Object(_.jsx)(C,{onSearch:e.onSearch}),e.isLoading&&Object(_.jsx)(R,{}),Object(_.jsx)(I,{cards:e.cards,hideButton:e.hideButton,noResult:e.noResult,onSaveClick:e.onSaveClick,onDelete:e.onDelete,savedMovies:e.savedMovies,isSavedMovie:e.isSavedMovie}),Object(_.jsx)(S,{})]})};var L=function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O,{}),Object(_.jsx)(C,{onSearch:e.onSearch}),e.isLoading&&Object(_.jsx)(R,{}),Object(_.jsx)(I,{cards:e.cards,hideButton:e.hideButton,noResult:e.noResult,onDelete:e.onDelete,isSavedMovies:e.isSavedMovies}),Object(_.jsx)(S,{})]})},M=a(12),T=a(14);var B=function(e){var t=Object(n.useState)({}),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)({}),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),h=u[0],m=u[1];return{formValues:c,setFormValues:s,errors:o,setErrors:l,isInputValid:h,setIsInputValid:m,handleInputChange:function(e){var t=e.target,a=t.name,n=t.value;s(Object(T.a)(Object(T.a)({},c),{},Object(M.a)({},a,n))),l(Object(T.a)(Object(T.a)({},o),{},Object(M.a)({},a,t.validationMessage))),m(t.closest("form").checkValidity())}}};var D=function(e){var t=B.formValues,a=B.setFormValues,n=B.errors,s=B.setIsInputValid,r=B.handleInputChange;return c.a.useEffect((function(){s(!0),a(e.currentUser)}),[e.currentUser,a,s]),Object(_.jsxs)("section",{className:"profile",children:[Object(_.jsx)(O,{}),Object(_.jsxs)("div",{className:"profile__container",children:[Object(_.jsxs)("h2",{className:"profile__hello",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",e.userData.name,"!"]}),Object(_.jsxs)("form",{className:"profile__edit-block profile__edit-name",children:[Object(_.jsxs)("div",{className:"profile__edit-block profile__edit-name",children:[Object(_.jsx)("lable",{className:"profile__edit-text",children:"\u0418\u043c\u044f"}),Object(_.jsx)("input",{className:"profile__user-text",id:"name",minLength:"3",name:"name",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:t.inputName||"",onChange:r,required:!0}),Object(_.jsx)("span",{className:"entrance__input-error",id:"entrance__input-name-error",children:n.inputName})]}),Object(_.jsxs)("div",{className:"profile__edit-block profile__edit-email",children:[Object(_.jsx)("lable",{className:"profile__edit-text",children:"E-mail"}),Object(_.jsx)("input",{className:"profile__user-text",id:"name",minLength:"3",name:"email",type:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443",value:t.inputEmail||"",onChange:r,required:!0}),Object(_.jsx)("span",{className:"entrance__input-error",id:"entrance__input-email-error",children:n.inputEmail})]}),Object(_.jsx)("button",{className:"profile__button profile__edit-button",type:"submit",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(_.jsx)("button",{className:"profile__button profile__exit-button",type:"button",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})]})]})};var V=function(e){var t=Object(u.g)();return Object(_.jsxs)("div",{className:"entrance__container",children:[Object(_.jsx)(h.b,{to:"/",className:"entrance__logo",children:Object(_.jsx)("img",{src:b,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})}),Object(_.jsx)("h3",{className:"entrance__hello",children:e.title}),Object(_.jsxs)("form",{className:"entrance__form",id:"".concat(e.name,"-form"),onSubmit:e.onSubmit,children:[e.children,Object(_.jsx)("button",{className:"".concat("/signin"===t.pathname?"entrance__button entrance__button-login":"entrance__button"),type:"submit",id:"entrance__submit",children:e.buttonText})]}),Object(_.jsxs)("div",{className:"entrance__come-in",children:[Object(_.jsx)("p",{className:"entrance__text",children:e.entranceText}),Object(_.jsx)(h.b,{to:"".concat("/signin"===t.pathname?"/signup":"/signin"),className:"".concat("/signin"===t.pathname?"entrance__link entrance__signin-link":"entrance__link entrance__signup-link"),children:e.entranceLink})]})]})};var F=function(e){var t=B(),a=t.formValues,n=a.name,c=a.email,s=a.password;return Object(_.jsx)("section",{className:"register",children:Object(_.jsxs)(V,{name:"register",title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",entranceText:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",entranceLink:"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(t){t.preventDefault(),e.onRegister(n,c,s)},children:[Object(_.jsx)("p",{className:"entrance__form-text",children:"\u0418\u043c\u044f"}),Object(_.jsx)("input",{name:"name",id:"register-name",className:"entrance__input entrance__input-name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",type:"text",required:!0,minLength:"3",value:t.formValues.name||"",onChange:t.handleInputChange}),Object(_.jsx)("span",{className:"entrance__input-error",id:"entrance__input-name-error",children:t.errors.name}),Object(_.jsx)("p",{className:"entrance__form-text",children:"E-mail"}),Object(_.jsx)("input",{name:"email",id:"register-email",className:"entrance__input entrance__input-email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443",type:"email",required:!0,value:t.formValues.email||"",onChange:t.handleInputChange}),Object(_.jsx)("span",{className:"entrance__input-error",id:"entrance__input-email-error",children:t.errors.email}),Object(_.jsx)("p",{className:"entrance__form-text",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(_.jsx)("input",{name:"password",id:"register-password",className:"entrance__input entrance__input-password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",required:!0,minLength:"5",value:t.formValues.password||"",onChange:t.handleInputChange}),Object(_.jsx)("span",{className:"entrance__input-error",id:"register-password-error",children:t.errors.password})]})})};var A=function(e){var t=B(),a=t.formValues,n=a.email,c=a.password;return Object(_.jsx)("section",{className:"login",children:Object(_.jsxs)(V,{name:"login",title:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",buttonText:"\u0412\u043e\u0439\u0442\u0438",entranceText:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",entranceLink:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onSubmit:function(t){t.preventDefault(),e.onLogin(n,c)},children:[Object(_.jsx)("p",{className:"entrance__form-text",children:"E-mail"}),Object(_.jsx)("input",{name:"email",id:"login-email",className:"entrance__input entrance__input-email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443",type:"email",required:!0,value:t.formValues.email||"",onChange:t.handleInputChange}),Object(_.jsx)("span",{className:"entrance__input-error",id:"login-email-error",children:t.errors.email}),Object(_.jsx)("p",{className:"entrance__form-text",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(_.jsx)("input",{name:"password",id:"login-password",className:"entrance__input entrance__input-password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",required:!0,minLength:"5",value:t.formValues.password||"",onChange:t.handleInputChange}),Object(_.jsx)("span",{className:"entrance__input-error",id:"login-password-error",children:t.errors.password})]})})};var q=function(e){var t=Object(u.f)();return Object(_.jsxs)("section",{className:"not-found",children:[Object(_.jsxs)("div",{className:"not-found__container",children:[Object(_.jsx)("h1",{className:"not-found__title",children:"404"}),Object(_.jsx)("p",{className:"not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]}),Object(_.jsx)("button",{className:"not-found__button",type:"button",onClick:function(){return t.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})},J=c.a.createContext(),P=a(16),G=a(17),z=a(18),H=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(P.a)(this,e),this.baseUrl=a,this.headers=n}return Object(G.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl),{method:"GET",headers:this.headers}).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({baseUrl:z.moviesBaseUrl,headers:{Accept:"application/json","Content-Type":"application/json"}}),Q=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(P.a)(this,e),this.baseUrl=a,this.headers=n}return Object(G.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:this.headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"getSavedMovies",value:function(){return fetch("".concat(this.baseUrl,"/movies"),{method:"GET",headers:this.headers})}},{key:"saveMovie",value:function(e){return fetch("".concat(this.baseUrl,"/movies"),{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteMovie",value:function(e){return fetch("".concat(this.baseUrl,"/movies/").concat(e),{method:"DELETE",headers:this.headers}).then(this._checkResponse)}},{key:"register",value:function(e,t,a){return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:a})}).then((function(e){if(console.log(e),200===e.status)return e.json();409===e.status&&console.log("\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0443\u043a\u0430\u0437\u0430\u043d email, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),400===e.status&&console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")})).then((function(e){return e})).catch((function(e){return console.log(e)}))}},{key:"authorize",value:function(e,t){return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){if(200===e.status)return e.json();400===e.status&&console.log("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),401===e.status&&console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")})).then((function(e){if(e.token)return localStorage.setItem("token",e.token),e})).catch((function(e){return console.log(e)}))}},{key:"checkToken",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){if(200===e.status)return e.json();400===e.status&&console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"),401===e.status&&console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")})).then((function(e){return e})).catch((function(e){return console.log(e)}))}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({baseUrl:z.mainBaseUrl,headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});var W=function(){var e=Object(u.f)(),t=c.a.useState({}),a=Object(d.a)(t,2),n=a[0],s=(a[1],c.a.useState(!1)),r=Object(d.a)(s,2),o=r[0],h=r[1],m=c.a.useState({}),b=Object(d.a)(m,2),p=(b[0],b[1]),O=c.a.useState([]),x=Object(d.a)(O,2),v=x[0],f=x[1],N=c.a.useState([]),g=Object(d.a)(N,2),k=g[0],S=g[1],w=c.a.useState(!1),C=Object(d.a)(w,2),U=C[0],I=C[1],R=c.a.useState(!1),M=Object(d.a)(R,2),T=M[0],B=M[1],V=c.a.useState(!1),P=Object(d.a)(V,2),G=P[0],z=P[1],W=c.a.useState([]),K=Object(d.a)(W,2),X=K[0],Y=K[1];function Z(){z(!0),setTimeout(Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(!1);case 1:case"end":return e.stop()}}),e)}))),1e3)}return c.a.useEffect((function(){H.getInitialCards().then((function(e){f(e)})).catch((function(e){console.log("Attention! ".concat(e))}))}),[]),Object(_.jsx)(J.Provider,{value:n,children:Object(_.jsx)("div",{className:"page",children:Object(_.jsxs)(u.c,{children:[Object(_.jsx)(u.a,{exact:!0,path:"/",children:Object(_.jsx)(y,{})}),Object(_.jsx)(u.a,{path:"/movies",children:Object(_.jsx)(E,{loggedIn:o,cards:k,isLoading:G,onSearch:function(e){Z();var t=e.toLowerCase(),a=[];v.forEach((function(e){null!==e.nameRU&&e.nameRU.toLowerCase().includes(t)||null!==e.nameEN&&e.nameEN.toLowerCase().includes(t)?(a.push(e),B(!1),I(!1),S(a),localStorage.setItem("movieSearchResult",JSON.stringify(a))):a.length<1&&(B(!0),I(!0),S([]))}))},hideButton:U,noResult:T,onSaveClick:function(e){Q.saveMovie(e).then((function(e){Y([e].concat(Object(i.a)(X)))})).catch((function(e){console.log("Attention! ".concat(e))}))},onDelete:function(e){Q.deleteMovie(e.id).then((function(){var t=X.filter((function(t){return t._id!==e._id}));Y(t)})).catch((function(e){console.log("Attention! ".concat(e))}))},savedMovies:X,isMoviesSaved:!0})}),Object(_.jsx)(u.a,{path:"/saved-movies",children:Object(_.jsx)(L,{loggedIn:o,isLoading:G,onSearch:function(e){Z();var t=e.toLowerCase(),a=[];X.forEach((function(e){null!==e.nameRU&&e.nameRU.toLowerCase().includes(t)||null!==e.nameEN&&e.nameEN.toLowerCase().includes(t)?(a.push(e),B(!1),I(!1),Y(a),localStorage.setItem("savedMovieSearchResult",JSON.stringify(a))):a.length<1&&(B(!0),I(!0),Y([]))}))},cards:X,hideButton:U,noResult:T})}),Object(_.jsx)(u.a,{path:"/profile",children:Object(_.jsx)(D,{loggedIn:o,currentUser:n})}),Object(_.jsx)(u.a,{path:"/signin",children:Object(_.jsx)(A,{onLogin:function(t,a){Q.authorize(t,a).then((function(t){t&&(localStorage.setItem("token",t.token),function(){var t=localStorage.getItem("token");t&&Q.checkToken(t).then((function(t){if(!t)return localStorage.removeItem("token"),void e.push("/");p({email:t.email,id:t._id}),h(!0),e.push("/movies")})).catch((function(t){console.log("Attention! ".concat(t)),e.push("/signin")}))}(),h(!0),e.push("/movies"))})).catch((function(e){console.log("Attention! ".concat(e))}))}})}),Object(_.jsx)(u.a,{path:"/signup",children:Object(_.jsx)(F,{onRegister:function(t,a,n){Q.register(t,a,n).then((function(t){console.log(t),t&&e.push("/signin")})).catch((function(e){console.log("Attention! ".concat(e))}))}})}),Object(_.jsx)(u.a,{path:"*",children:Object(_.jsx)(q,{})})]})})})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,45)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(h.a,{children:Object(_.jsx)(W,{})})}),document.getElementById("root")),K()}},[[44,1,2]]]);
//# sourceMappingURL=main.4236c61b.chunk.js.map